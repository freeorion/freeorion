
    Fix alliance victory if diplomacy is forbidden
    If diplomacy is forbidden the empires in peace cannot do anything with
    it and have to wait for tech victory, experimenters victory or
    concede of other.



    [AI] Do not consider Exobot immediately (#4065)
    [AI] Fix role detection for orbital defense (#4023)
    [AI] Do not calculate colonization values twice (#4020)
    [AI] Use multipage layout for charts(#3978)
    [AI] Fix check for available slots (#4013)
    [AI] Adapt for no longer parallel colony buildings (#4002)
    [AI] Limit supply penalty for independant species (#3980)
    [AI] Fix evaluation of capital species (#3982)
    [AI] Remove duplicated dependency and improvments (#3963)
    [AI] Use forgotten supply factor (#3966)
    [AI] Some fixes and a rough adaption of the invasion rating (#3964)
    [AI] Break dependency of buildings on empire (#3949)
    [AI] Planet rating (#3916)
    [AI] calculate research and stability, tech_soon_available (#3939)
    [AI] calculate_production.py (#3934)
    [AI] Refactor shipyards using BuildingType (#3857)
    [AI] Avoid division by zero (#3944)
    [AI] avoid division by zero exception (#3861)
    [AI] Fix _get_queued_base_troopers (#3791)
    [AI] Fixes for drop invasion (#3783)
    [AI] Improve AI invasion handling (#3754)
    [AI] Ensure colony_buildes are initialized before usage (#3744)
    [AI] Consider researching space flux hulls if you dont research organics


    [AI] Building refactoring (#3808)
    - Scanning Facility: Don't build it where it is disliked
    - Gas Giant Generator: Completely new logic

    



### Key Changes

- Added a government policies system
    - Policies have various positive or negative effects on an empire, some of which were moved from techs to policies
    - Policies represent various social, economic, and military ideas and ideals
    - Empires have limited slots in which policies can be adopted
    - Slots are unlocked by techs, buildings, other policies, ships, species or other content
- Gave species likes and dislikes
    - Buildings, policies, or specials nearby or in an empire affect their planet stability
- Made planet stability have more consequences
    - Various planet effects depend on stability levels, including resource output growth rates and stable values
    - Low planet stability causes rebel troops to appear
    - Rebel troops can cause a planet to leave an empire
- Added influence resource
    - Spent to adopt policies
    - Consumed by colonies and outposts and various content
    - Generated by various content and associated planet focus setting
    - Going into debt will reduce planet stability
- Extensive content reworking and balance adjustments for buildings, techs, policies, species, ship hulls and parts
- Combats default to 4 bouts, with ship structure and damage adjusted accordingly
- Added additional fleet aggression settings for finer control of blockading, hiding, and combat initiation


### Detailed Changelog


#### Graphics / Interface

- Fixed UI button mouse rollover sound not playing
- Added another star forming nebula appearance
- Set minimum window sizes on design screen
- Improved pedia search performance and noted time to search at end of results
- Show + or - instead of brackets around second number (change) in StatisticIcon
- Don't show planet type wheel for asteriods and gas giant pedia pages
- Fixed extraneous precision in graph axis labels
- Allow galaxy setup panel of multiplayer lobby to scale with window size
- Fixed message color in chat history
- Made tab bar button size flexible with font size
- Disabled queue popup commands while order issuing is disabled
- Fixed hang when the production list is refreshed while a popup menu is open
- Added display of config and log directory on options directories tab
- Added a list of issued orders on the player's empire's pedia page
- Don't hide meter icons when the output is negative
- Fixed issue with multiplayer empire lists with eliminated empires when loading games
- Fixed fleets window scroll resetting when changing fleet aggression
- Added Unicode glyphs U+22C4 "Diamond Operator" and U+22C5 "Dot Operator" to Roboto regular font to use as a bullet point markers
- Added options to control for tooltip colours
- Made big fleet icons bigger
- Added an option to lock map zoom and panning
- Show script-derived floating point numbers in UI with only 3 digits
- Split Attack column on Objects List into Total Structure Damage per Battle and Number of Destroyed Fighters per Battle
- Replaced field mouseover image
- Excluded stale objects from map window determination of detector ranges
- Added (optional) rendering of future turn's predicted detection range circles for the selected fleet
- Switched to updating all object meters when showing system in the sidepanel, not just system contents, due to different results
- Started rendering fleets that are (somehow?) not in systems and not moving
- Added some hopefully-helpful explanation text to the output of "freeorion -h" on the command line
- Disallowed newlines in pedia search edit to prevents weirdness when pasting multi-line text
- Added a link to the configuration file directory in the Configuration pedia article
- Accounted for SI postfixes in text representations of numbers when sorting object list columns
- Added distance to the selected system or fleet to objects list columns
- Restricted selectable files to those that are valid and executable when setting server binary executable file on Windows
- Split ship damage and fighter destruction in ship tooltips
- Fixed neutral / unowned forces being labelled "Unknown" in combat initial stealth event descriptions
- Added clickable links in field type articles to fields in universe of those types
- Reworked automatic fleet aggression selection when splitting fleets
- Fixed some numbers being rendered as text with 1 digit of precision instead of 1 fractional digit of precision
- Fixed arrow textures having cut off glow at their edges
- Added number of worlds settled to the census report tooltip
- Removed the "No Star" label from the displayed names of starless system
- Displayed real system name on map and sidepanel for empty systems
- Replaced Colony Base Hull graphic
- Added lists of species to species traits pedia pages
- Comma separated list of planets on the homeworlds pedia page


#### Content and Balance

- Government
    - Added numerous policies that empires can unlock and adopt

- Ships
    - Ship structure and damage adjusted for 4 bout combats
    - Added the Flux Lance weapon that is "short range", attacking starting from bout 3 (or 2 if the Charge policy is adopted)
    - Added the Graviton Pulsar weapon that has 12 attacks that do 1 damage and targets anything, useful against fighters
    - Added the Space Flux Composite hull
    - Added the Small Robotic Hull
    - Split spatial flux hulls into their own hull line (were in robotic)
    - Made owning a ship with a flux bubble hull decrease colony production time    
    - Rebalanced fighter techs and pilot trait effects
    - Applied ship weapon damage rule scaling rule to species and monster weapon bonuses and 
    - Applied ship structure scaling to tree regeneration
    - Made blockade checks test that a fleet is set to Obstructive not Aggressive
    - Reworked Organic hull to be cheaper with more fuel and less slots
    - Added a stealth stealth penalty to ships with large numbers of ships in the same system owned by the same empire
    - Added some ship stealth bonuses and penalties dependent on star type
    - Made Laenfa fuel regrow and white or blue stars
    - Made Sly refuel and repair at planets with own species, without a supply network
    - Reworked various monster ship designs
    - Added or reworked several monster weapons to do bout-dependent damage
    - Redesigned various monster ship designs and gave some extra shots or damage to monster hulls for some weapons the designs use
    - Various cost rebalancings
    - Removed prerequisite dependence between fighter and other weapon techs
    - Required a part to do more than 0 damage to destroy a figher
    - Made Chaos Wave bombardment remove outposts
    - Made snowflake bodies have good instead of excellent vision
    - Reduced living hull detection boost from 50 to 40

- Planets
    - Added some luxury resource specials that some species like and thus get stabilitly boosts from
    - Reduced spawn rates of some specials
    - Made various research and industry bonuses depend on stability
    - Added species traits for varying levels of baseline stability, shield strength, influence
    - Add precognitive detection to Fulver, giving basic visibility to starlane connected planets
    - Asteroid processor and Asteroid Reformation processor now remove themselves if their planet is not an asteroid
    - Made planet max shields not depend on recent combats in system
    - Adjusted troop levels after invasion 
    - Reworked Stellar Tomography to give bonuses based on the number of research-focused planets in a system
    - Reworked Distributed Thought Computing to give bonuses based on distance to the furthest owned ship    
    - Made just-colonized planets start with 6 troops
    - Disabled garrison tech troop regen on just-conquered planets
    - Rebalanced troop bonuses from garrison techs
    - Set infrastructure to 1 on just-conquered planets
    - Made self-sustaining metabolism only give population boosts on good planets
    - Rebalanced Trith species: medium starting planet, bad supply, bad industry, great influence, bad stability, make some planet types average environment
    - Reworked Replicon species
    - Gave player planets at least 6 troops in beginner mode
    - Gave Sly and Laenfa distinct non-distance dependent stability effects
    - Added the Imperial Regional Administration building that acts like a capital for colony supply distance cost calculations
    - Made distance and supply connection to the imperial capital or regional admin affect planet stability, dependent on adopted policies
    - Restricted the imperial palace stability effect to work only if the palace is on an imperial capital planet
    - Removed Galactic Infrastructure tech's supply-range boost effect
    - Made Gravitic Architecture only boost supply range of Logistics focused planets
    - Removed InterSpecies academy location requirement dependence on default focus
    - Made some species effects not fire if a planet is unowned
    - Reduced Concentration Camp industry boost
    - Added an Abandon Outpost building, which removes an empire's outpost from the planet
    - Added a Colony Independence Decree building, which removes an empire's ownership from the planet but leaves the population as an independent colony
    - Added the Nearly-Universal Translator building, which boosts influence focus influence resource output and grants a policy slot
    - Renamed Evacuation System building to Evacuation
    - Made the influence focus bonus population-dependent
    - Disabled generation of Head on a Spike from Cultural Archives
    - Added more penalties to resource meters when focus switching to mitigate focus-toggling strategies
    - Rebalanced Force Energy Structures to give fixed 3/turn faster growth or decay of meters
    - Made protection focus increase troop regeneration rate (if not attacked on previous turn)
    - Made species stability bonus for liking focus not require empire control of planet    
    - Removed Terraforming and Terraforming Reversion buildings
    - Added Popular Terraforming building that goes all the way to the preferred type for the planet's species in one step with suitable cost and time
    - Added Targeted Terraforming, separate for each target planet type, that doesn't depend on the planet's species to control the target
    - Made Trans-Organic Sentience tech boost the growth/decay rate of influence meters    
    - Reworked the population growth formula so bigger planets don't fill up faster than smaller planets
    - Added guard monsters to resource specials
    - Added an effect to Outposts so their influence moves towards target influence, which otherwise wouldn't happen.
    - Blocked enqueuing more than one of any colony building on a planet
    - Reduced scanning facility range boost from 75 to 50
    - Added some planet stealth bonuses and penalties dependent on star type
    - Reduced probabity for natives spawning on asteroids and gas giants during universe generation
    - Allowed natives species to spawn on adequate or poor planets if they have no good planet types during universe creation
    - Adjusted order of effects for species-trait scaling of resource output
    - Added guards to Biege Goo and Fiftyseven native planets
    - Added occasional defenses to native planets
    - Stopped Lembalalam from being both moderate and high tech natives
    - Added some restrictions to what species research traits can have High Tech Natives specials
    - Made some monster nests randomly be stealthy from turn to turn
    - Randomly replaced 20% of ancient guardians creation with applying a stealthed planet special instead
    - Made ancient guardians less common
    - Made changes in max population affect growth more promptly
    - Set influence output to zero when evacuating a planet
    - Tweaked minimum distance to spawn monsters away from empire capitals
    - Made kraken under the ice specials harder to detect
    - Made the Lighthouse effect more gradual and less effective for planets/buildings
    - Tweaked priority for garrison troop tech effects

    
- Fields
    - Made made star forming nebulae smaller, reduced speed and detection, increased stealth, limited number generated
    - Added Void rift
    - Added Nanite Swarm
    - Added Meteor Blizzard
    - Adjusted Molecular Cloud speed and size
    - Adjusted Ion Storm speed
    - Adjusted field spawning to be closer to the galaxy centre during universe generation
    - Made Nebulae not reduce ship speed below 5, so they don't get stuck in place
    - Added Field Repellor building
    - Made Nymnmn species attract some fields

- Pedia
    - Replaced various hard-coded numbers with content script-derived calculated values
    - Fixed placement limit documenation for InterSpecies academy
    - Documented Planetary Starlane Drive
    - Documented supply network propagation mechanics
    - Additional entries for planetary focus game concept
    - Updated or expanded articles for Spatial Distortion, Industry, Logistics, Planet Drive, Psychic Domination, Organic Hull
    - Added an "All Species" list in the species article
    - Improved imperial stockpile distribution documentation
    - Added lists of native, playable, and all species
    - Removed out-of-universe UI-related motivation for the planet drive beacon
    - Expanded the quick start guide
    - Elaborated on Sly description
    - Fixed robotic shields values


    Add stealth bonus info about colonies in SPY_PLANET_STEALTH_MOD_DESC
    Add extra sources of detection to METER_DETECTION_VALUE_DESC



- Stringtables
    - Updated translations: French, German, Spanish
    - Cleaned up some unused strings
    - Avoid referring to the player in the second person ("you", "your")
    - Added additional custom accounting labels for various effects
    - Renamed '%SPECIES% Colony' to 'Colony of %SPECIES%'
    - Added some missing options description strings for colours
    - Added a link in the 'new dyson forest growing' sitrep to the Dyson Forest pedia page 

- Other
    - Many building, species, and tech balance adjustments along with new government systems and influence-constrained growth
    - Adjusted info shared between allied and non-allied empires
    - Reworked how allied and not-mutual-allied supply network sharing and merging handles various situations
    - Nerfed Telepathy bonus to Psionics cost
    - Removed the Galactic Infrastructure tech
    - Added more and rebalanced universe creation frequency options 
    - Fixed issues with Starlane Bore and Starlane Nexus not correctly avoiding existing starlanes when generating new ones
    - Removed Cyborgs tech
    - Removed redundant prerequisite of N-Dimensional Subspace tech
    - Added the the Asteroid coating special that appears on asteroids and gives owned asteroid ships a structure boost
    - Reworked detection levels to increment in steps of 25 instead of 25 or 50
    - Added native species: Celestephyte, Thenian, Nightsiders, Sleepers, Khakturian
    - Added a system special of derelict small troop ships crewed by Khakturian, similar to other derelict specials
    - Made Laenfa sneaky, giving them a halved research cost for planet stealth



#### AI

- AI adopts policies
- AI Manages influence and stability
- AI builds Regional Administrations and Nearly Universal Translators
- Improved invasion handling
- AI no longer uses protection focus for military purposes
- Many refactorings and adaptations for changed rules and content
- Devalued Gaia special as Sly
- Corrected colony pod turns_to_build when Lifecycle Manipulation is available
- Fixed issue with weapons that have 0 shots
- Made AI tech enqueue order more consistent between different machines
- Stopped AI from attempting to colonize unexplored systems (which may contain unobserved monsters)
- Added an option allowing human players in multiplayer games to take over playing AI empires
- Made AI aware of self-sustaining species population mechanics
- Made AI aware of distance restrictions of guard monsters
- Made AI not attempt to invade allied planets




#### Other Features

- Added an option to save game after player issued orders
- Renamed Trade resource to Influence
- Treat empires without population and ships as eliminated
- Expanded fleet aggression settings to: initiate combat, obstruct passage (but don't initiate combat), defensive hide, and passive hide (don't fire even if attacked in combat)
- Introduced server-side auto turn advance option
- Added a game rule to make all objects visible
- Added a game rule that makes never-detected planets not (detectable regardless of stealth and detection strength) just by having an object in system
- Added a game rule that makes all systems at least basically visible to all empires
- Added a game rule that makes basic visibility systems reveal their name and star type
- Added a game rule that adjusts the tech victory difficulty
- Added a game rule that sets the minimum monster starting distance
- Added a game rule for whether extrasolar ships give detection, defaulting to off
- Added a game rule to enable repeating species during universe generation
- Added a game rule to adjust planet baseline stability
- Made ground combat allow allies to share forces
- Made planet focus reset when conquered by neutrals or rebels
- Made meter estimates count ground combat
- Ignored freshly established colonies for evacuation building effects
- Made maturing monsters keep their names
- Added some sanitization of user-input text to reject some formatting characters
- Made combat object damaged sitreps require partial (direct via detection) visibility of an object to receive
- Made the server disconnect AIs if a player joins who previously controlled the AI's empire
- Made the server kill the process of AI players of eliminated empires
- Showed number of fighters shot instead of number direct weapon hits in ship design pedia articles
- Reworked damage estimation and split damage to ships separately from numbers of fighters shot in ship design pedia articles
- Reworked calculation of empire total military strength
- Enabled multi-line debug python commands in chat by replacing ; with newlines before
- Added a server option to allow any player to be an observer
- Restricted some characters that can be used in player-specified names in orders



#### Other Bug Fixes

- Crashes or Disconnects
    - Fixed server freeze when disconnecting a player
    - Fixed potential denial of service issue on server
    - Fixed crash when sorting UI lists
    - Fixed a crash if a fleet ended up with no previous or next system
    - Fixed crash during turn processing due to a failed check for whether a player connection is local
    - Fixed a crash with big combat logs
    - Fixed connect to server timout after 2 seconds

- Gameplay
    - Fixed bombardment not working if ships only have bombardment weapons
    - Fixed various issues with automatic turn advancing
    - Made simultaneous colonization fail instead of picking one empire based on ID
    - Fixed issue where two empires gifting eachother everything in a system would have order-dependence problems
    - Disallowed mixing arrival starlanes in a new fleet or in a ship-fleet transfer
    - Made non-empire forces work like an empire for visibility within combat
    - Fixed population reduction when using planet Starlane Drives
    - Fixed issues with merging fleets arriving from different starlanes or not having arrived from anywhere

- Content
    - Fixed Gaia special planet type selection
    - Fixed Artificial Black Hole generating multiple sitreps
    - Fixed Distortion Focus planet proximity check
    - Removed some redundant tech prerequisites
    - Fixed multiple sitreps appearing if multiple nova bombs are simultaneously detonated
    - Removed pointless damage boost for piloting for Flak
    - Fixed issue where kraken nests wouldn't hide under clouds if created after the initial turn
    - Fixed artificial moon building not removing itself after adding the resonant moon special


- Fixed Python logging memory leak
- Fixed issue with Python text encoding on Windows systems
- Fixed issue with loading stringtables that have many successive lines with just # comments on them
- Fixed issue where AI clients weren't informed of modified game rules
- Added extra newlines to the end of autogenerated pedia pages to avoid issues with clickable links

#### Technical / Internal

- Dependencies and Versions
    - Raised C++ language version to C++17
    - Moved to compiling with Visual Studio 2019 or 2022 on Windows, removed 2017 support
    - Python 3.7+ is now supported and required. 
    - Bumped minimum versions of various dependencies and versions included in the FreeOrion SDK

- Added named ValueRefs that can be defined in scripts and referenced elsewhere in scripts or in stringtable entries
- Added a NoOp condition for debugging
- Salt combat PRNG seeding with the galaxy seed
- Partially implemented an alternative client in Godot with Android support
- Partially migrated scripted content from custom FreeOrion Content Script to Python scripts
- Fixed a probably long-standing (8 years?) bug with ContainedBy::Match that returned the opposite of what it should have, but which probably didn't affect any previously-scripted content
- Added a server flag that merges quickstart and load game options
- Compressed data in some larger message types when transmitting from server to clients over a network
- When loading single player games, assigned AIs to empires based on names in save
- Stopped client-side auto-turn-advance on errors
